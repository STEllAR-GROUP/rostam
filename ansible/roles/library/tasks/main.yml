# Copyright (c) 2015-2016 Alireza Kheirkhahan
#
# Distributed under the Boost Software License, Version 1.0. (See accompanying
# file BOOST_LICENSE_1_0.rst or copy at http://www.boost.org/LICENSE_1_0.txt)
---
- name: Install environment-modules
  yum: name=environment-modules state=present

- name: Install Devtoolset-3 repo
  yum: name=https://www.softwarecollections.org/en/scls/rhscl/devtoolset-3/epel-7-x86_64/download/rhscl-devtoolset-3-epel-7-x86_64.noarch.rpm state=present

- name: Install Git-1.9 repo
  yum: name=https://www.softwarecollections.org/en/scls/rhscl/git19/epel-7-x86_64/download/rhscl-git19-epel-7-x86_64.noarch.rpm state=present

- name: install some library packages
  yum: name={{ item }} state=installed
  with_items:
    - libX11-devel
    - cmake
    - libibverbs-devel
    - python-pip
    - hdf5-devel
    - hdf5-mpich-devel
    - hdf5-openmpi-devel
    - gperftools-devel
    - libunwind-devel
    - papi-devel
    - emacs
    - libibverbs-devel
    - devtoolset-3-toolchain
    - devtoolset-3-perftools
    - git19
    - lsb

- name: installing clang packages
  yum: name={{ item }} state=installed
  with_items:
    - clang
    - clang-analyzer
    - clang-devel
    - llvm-devel
    - llvm-doc

- name: installing boost packages
  yum: name={{ item }} state=installed
  with_items:
    - boost
    - boost-build
    - boost-devel
    - boost-mpich-devel
    - boost-openmpi-devel

- name: installing libraries for boost 
  yum: name={{ item }} state=installed
  with_items:
    - libicu-devel
    - bzip2-devel
    - texinfo
    - zlib-devel
    - python-devel

- name: update pip
  pip: name=pip state=latest

- name: install conan
  pip: name=conan state=present

- name: rsync the easybuild library
  synchronize: src=/opt/eb dest=/opt/ delete=yes owner=no group=no

- name: rsync the boost library
  synchronize: src=/opt/boost dest=/opt/ delete=yes owner=no group=no

- name: rsync the module files
  synchronize: src=/opt/modules dest=/opt/ delete=yes owner=no group=no

